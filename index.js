import{a as h,i as d,S as b,N as v,P as L}from"./assets/vendor-hUVvDy9I.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(t){if(t.ep)return;t.ep=!0;const r=n(t);fetch(t.href,r)}})();const u="https://furniture-store.b.goit.study/api",m=document.querySelectorAll(".category-card"),f=document.querySelector(".furniture-list"),a=document.querySelector(".load-more-button"),y=document.querySelector(".loader");let p="",c=1;function w(){y.classList.remove("hidden")}function P(){y.classList.add("hidden")}async function g(e="",s=1,n=8){w();try{const o=e?`${u}/furnitures?category=${e}&limit=${n}&page=${s}`:`${u}/furnitures?limit=${n}&page=${s}`,r=(await h.get(o)).data;if(!r.furnitures||r.furnitures.length===0){d.info({title:"Увага",message:"Більше товарів цієїкатегорії немає в наявності",position:"topRight"}),a.disabled=!0;return}S(r.furnitures,s===1),r.furnitures.length<n?a.disabled=!0:a.disabled=!1}catch(o){console.error("Помилка при отриманні меблів:",o),d.error({title:"Помилка",message:"Не вдалося завантажити меблі. Спробуйте ще раз.",position:"topRight"})}finally{P()}}function S(e,s=!0){const n=e.map(o=>{const t=o.color.map(r=>`<span class="furniture-color-circle" style="background-color: ${r};"></span>`).join("");return`
          <li class="furniture-card" data-id="${o._id}">
          <img src="${o.images[0]}" alt="${o.name}" class="furniture-image" />
          <h3 class="furniture-name">${o.name}</h3>
          <div class="furniture-colors">${t}</div>
          <p class="furniture-price">${o.price} грн.</p>
          <button type="button" class="details-btn">Детальніше</button>
          </li>
          `}).join("");s?f.innerHTML=n:f.insertAdjacentHTML("beforeend",n)}async function B(){try{const n=await(await fetch(`${u}/categories`)).json();document.querySelectorAll(".category-card").forEach(t=>{const r=t.dataset.name,i=n.find(l=>l.name===r);i&&(t.dataset.id=i._id)})}catch(e){console.error("Помилка при підставці ID категорії:",e),d.error({title:"Помилка",message:"Не вдалося завантажити категорії. Спробуйте ще раз.",position:"topRight"})}}function k(){m.forEach(e=>{e.addEventListener("click",()=>{m.forEach(s=>s.classList.remove("active")),e.classList.add("active"),p=e.dataset.id||"",c=1,g(p,c)})})}a.addEventListener("click",()=>{c+=1,g(p,c)});f.addEventListener("click",e=>{const s=e.target.closest(".details-btn");if(s){const n=s.closest(".furniture-card");n==null||n.dataset.id}});async function E(){await B(),k(),g()}E();async function A(e,s,n){const o="https://furniture-store.b.goit.study/api/",t=new URLSearchParams({page:s,limit:n}),r=`${o}${e}?${t.toString()}`;return(await h(r)).data}function q(e){return e>=3.3&&e<=3.7?3.5:e>=3.8&&e<=4.2?4:Math.round(e*2)/2}function R(e){return e.map(({descr:s,name:n,rate:o})=>`
      <div class="swiper-slide">
        <div class="feedback-card">
          <div class="raty" data-score="${q(o)}"></div>
          <p class="feedback-text">"${s}"</p>
          <p class="feedback-name">${n}</p>
        </div>
      </div>
    `).join("")}A("feedbacks",1,10).then(e=>{var r;if(!((r=e.feedbacks)!=null&&r.length))return;const s=document.querySelector(".feedback-from-API");s.innerHTML=R(e.feedbacks),$(".raty").raty({readOnly:!0,half:!0,starType:"i",score(){return $(this).attr("data-score")}});const n=document.querySelector("#prev-btn"),o=document.querySelector("#next-btn");new b(".feedback-swiper",{modules:[v,L],slidesPerView:1,spaceBetween:20,slidesPerGroup:1,watchOverflow:!0,breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:32}},navigation:{nextEl:o,prevEl:n},pagination:{el:"#feedback-dots",clickable:!0,bulletClass:"dot",bulletActiveClass:"active",renderBullet:(i,l)=>`<div class="${l}"></div>`},on:{init(){t(this)},slideChange(){t(this)},resize(){t(this)}}});function t(i){n.classList.toggle("arrow-disabled",i.isBeginning),o.classList.toggle("arrow-disabled",i.isEnd)}}).catch(e=>console.error("Помилка при отриманні відгуків:",e));
//# sourceMappingURL=index.js.map
