import{A as S,a as g,i,S as E,N as k,P as q}from"./assets/vendor-WM8bFQgC.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(r){if(r.ep)return;r.ep=!0;const n=t(r);fetch(r.href,n)}})();const A=document.querySelector(".hero-btn"),B=document.getElementById("feedback");A.addEventListener("click",()=>{B.scrollIntoView({behavior:"smooth"}),(void 0).blur()});new S(".accordion-container-FAQ",{duration:900,showMultiple:!1});document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll(".FAQ-item");document.querySelectorAll(".FAQ-item").forEach(t=>t.addEventListener("click",()=>{t.classList.toggle("active")})),e.forEach(t=>{const s=t.querySelector(".FAQ-btn"),r=t.querySelector(".ac-panel");s.addEventListener("click",function(){r.style.display==="flex"?r.style.overflow="hidden":r.style.display="flex"})})});const f="https://furniture-store.b.goit.study/api",b=document.querySelectorAll(".category-card"),p=document.querySelector(".furniture-list"),l=document.querySelector(".load-more-button"),v=document.querySelector(".loader");let m="",d=1;function P(){v.classList.remove("hidden")}function C(){v.classList.add("hidden")}async function h(e="",o=1,t=8){P();try{const s=e?`${f}/furnitures?category=${e}&limit=${t}&page=${o}`:`${f}/furnitures?limit=${t}&page=${o}`,n=(await g.get(s)).data;if(!n.furnitures||n.furnitures.length===0){i.info({title:"Увага",message:"Більше товарів цієїкатегорії немає в наявності",position:"topRight"}),l.disabled=!0;return}M(n.furnitures,o===1),n.furnitures.length<t?l.disabled=!0:l.disabled=!1}catch(s){console.error("Помилка при отриманні меблів:",s),i.error({title:"Помилка",message:"Не вдалося завантажити меблі. Спробуйте ще раз.",position:"topRight"})}finally{C()}}function M(e,o=!0){const t=e.map(s=>{const r=s.color.map(n=>`<span class="furniture-color-circle" style="background-color: ${n};"></span>`).join("");return`
          <li class="furniture-card" data-id="${s._id}">
          <img src="${s.images[0]}" alt="${s.name}" class="furniture-image" />
          <h3 class="furniture-name">${s.name}</h3>
          <div class="furniture-colors">${r}</div>
          <p class="furniture-price">${s.price} грн.</p>
          <button type="button" class="details-btn">Детальніше</button>
          </li>
          `}).join("");o?p.innerHTML=t:p.insertAdjacentHTML("beforeend",t)}async function R(){try{const t=await(await fetch(`${f}/categories`)).json();document.querySelectorAll(".category-card").forEach(r=>{const n=r.dataset.name,a=t.find(w=>w.name===n);a&&(r.dataset.id=a._id)})}catch(e){console.error("Помилка при підставці ID категорії:",e),i.error({title:"Помилка",message:"Не вдалося завантажити категорії. Спробуйте ще раз.",position:"topRight"})}}function x(){b.forEach(e=>{e.addEventListener("click",()=>{b.forEach(o=>o.classList.remove("active")),e.classList.add("active"),m=e.dataset.id||"",d=1,h(m,d)})})}l.addEventListener("click",()=>{d+=1,h(m,d)});p.addEventListener("click",e=>{const o=e.target.closest(".details-btn");o&&o.closest(".furniture-card")?.dataset.id});async function F(){await R(),x(),h()}F();async function I(e,o,t){const s="https://furniture-store.b.goit.study/api/",r=new URLSearchParams({page:o,limit:t}),n=`${s}${e}?${r.toString()}`;return(await g(n)).data}function O(e){return e>=3.3&&e<=3.7?3.5:e>=3.8&&e<=4.2?4:Math.round(e*2)/2}function T(e){return e.map(({descr:o,name:t,rate:s})=>`
      <div class="swiper-slide">
        <div class="feedback-card">
          <div class="raty" data-score="${O(s)}"></div>
          <p class="feedback-text">"${o}"</p>
          <p class="feedback-name">${t}</p>
        </div>
      </div>
    `).join("")}I("feedbacks",1,10).then(e=>{if(!e.feedbacks?.length)return;const o=document.querySelector(".feedback-from-API");o.innerHTML=T(e.feedbacks),$(".raty").raty({readOnly:!0,half:!0,starType:"i",score(){return $(this).attr("data-score")}});const t=document.querySelector("#prev-btn"),s=document.querySelector("#next-btn");new E(".feedback-swiper",{modules:[k,q],slidesPerView:1,spaceBetween:24,slidesPerGroup:1,watchOverflow:!0,breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:24}},navigation:{nextEl:s,prevEl:t},pagination:{el:"#feedback-dots",clickable:!0,bulletClass:"dot",bulletActiveClass:"active",renderBullet:(n,a)=>`<div class="${a}"></div>`},on:{init(){r(this)},slideChange(){r(this)},resize(){r(this)}}});function r(n){t.classList.toggle("arrow-disabled",n.isBeginning),s.classList.toggle("arrow-disabled",n.isEnd)}}).catch(e=>{console.error("Помилка при отриманні відгуків:",e),i.show({title:"Помилка",message:e.message||"Не вдалося завантажити відгуки.",position:"topCenter",color:"#ef4040",messageColor:"#fff",titleColor:"#fff"});const o=document.querySelector(".feedback-from-API");o&&(o.innerHTML='<div class="error-text"><p>Не вдалося показати відгуки.</p></div>');const t=document.querySelector("#prev-btn"),s=document.querySelector("#next-btn");t&&(t.disabled=!0,t.classList.add("arrow-disabled")),s&&(s.disabled=!0,s.classList.add("arrow-disabled"))});const j=document.querySelector(".modal-close-btn"),y=document.querySelector(".modal-overlay"),c=document.querySelector(".modal-form");j.addEventListener("click",u);y.addEventListener("click",e=>{e.target===y&&u()});document.addEventListener("keydown",L);function u(){y.classList.toggle("is-open"),document.removeEventListener("keydown",L)}function L(e){e.key==="Escape"&&u()}c.addEventListener("submit",async e=>{e.preventDefault();const o={email:c.elements["user-email"].value,phone:c.elements.phone.value,modelId:"682f9bbf8acbdf505592ac36",color:"#1212ca",comment:c.elements["user-comment"].value};try{const t=await g.post("https://furniture-store.b.goit.study/api/orders",o,{headers:{"Content-Type":"application/json"}});i.success({title:"OK",message:"Замовлення успішно відправлено!",position:"topRight"}),u(),c.reset()}catch(t){console.error("Помилка відправки:",t),i.error({title:"Error",message:t.response.data.message,position:"topRight"})}});
//# sourceMappingURL=index.js.map
