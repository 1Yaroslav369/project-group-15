import{A as I,a as M,i as d,S as F,N as R,P as O}from"./assets/vendor-WM8bFQgC.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(t){if(t.ep)return;t.ep=!0;const o=n(t);fetch(t.href,o)}})();const T=document.querySelector(".hero-btn"),j=document.getElementById("feedback");T.addEventListener("click",()=>{j.scrollIntoView({behavior:"smooth"}),(void 0).blur()});new I(".accordion-container-FAQ",{duration:900,showMultiple:!1});document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll(".FAQ-item");document.querySelectorAll(".FAQ-item").forEach(n=>n.addEventListener("click",()=>{n.classList.toggle("active")})),e.forEach(n=>{const r=n.querySelector(".FAQ-btn"),t=n.querySelector(".ac-panel");r.addEventListener("click",function(){t.style.display==="flex"?t.style.overflow="hidden":t.style.display="flex"})})});function z(){const e=document.querySelector("[data-menu]"),s=document.querySelector("[data-menu-landscape]"),n=document.querySelector(".header"),r=document.body;if(!e||!s||!n)return;const t=(a,i)=>{a&&(a.classList.toggle("is-open",i),r.classList.toggle("no-scroll",i),n.classList.toggle("no-border-bottom",i),n.classList.toggle("is-menu-open",i))},o=()=>{const a=window.matchMedia("(min-width: 768px) and (max-width: 1439px) and (orientation: portrait)").matches,i=window.matchMedia("(min-width: 768px) and (max-width: 1439px) and (orientation: landscape)").matches;return window.innerWidth<=767||a?e:i?s:null};r.addEventListener("click",a=>{const i=a.target.closest("[data-menu-open]"),h=a.target.closest("[data-menu-close]"),v=a.target.closest("a");if(i){const c=o();c&&t(c,!0)}else if(h||v){const c=o();c&&c.classList.contains("is-open")&&t(c,!1)}}),window.addEventListener("keydown",a=>{const i=o();a.key==="Escape"&&i&&i.classList.contains("is-open")&&t(i,!1)}),window.addEventListener("resize",()=>{const a=window.matchMedia("(min-width: 768px) and (max-width: 1439px) and (orientation: portrait)").matches,i=window.matchMedia("(min-width: 768px) and (max-width: 1439px) and (orientation: landscape)").matches,h=e.classList.contains("is-open"),v=s.classList.contains("is-open");h&&(!a||window.innerWidth>1439)&&t(e,!1),v&&(!i||window.innerWidth>1439)&&t(s,!1)})}document.addEventListener("DOMContentLoaded",()=>{z()});const l=document.querySelector(".modal-furniture");document.querySelector(".modal-form-container");const x=document.querySelector(".btn-close-modal"),f=document.querySelector(".content-modal-form");document.querySelector(".example");function H(e){const s=W().find(n=>n._id===e);s&&D(s)}function D(e){console.log("Рейтинг:",e.rating),f.innerHTML=N(e),l.classList.remove("is-hidden"),document.body.style.overflow="hidden",$(f).find(".raty").raty({readOnly:!0,half:!0,starType:"i",score:function(){return $(this).attr("data-score")}});const s=f.querySelectorAll(".color-btn"),n=f.querySelector(".main-image");s.forEach(r=>{r.addEventListener("click",()=>{s.forEach(o=>o.classList.remove("active")),r.classList.add("active");const t=r.dataset.img;t&&n&&(n.src=t)})}),x.addEventListener("click",m),l.addEventListener("click",A),document.addEventListener("keydown",B)}function m(){document.body.style.overflow="",l.classList.add("is-hidden"),x.removeEventListener("click",m),l.removeEventListener("click",A),document.removeEventListener("keydown",B);const e=f.querySelector(".btn-order");e&&e.addEventListener("click",()=>{m(),hideModal()})}function A(e){e.target===l&&m()}function B(e){e.key==="Escape"&&!l.classList.contains("is-hidden")&&m()}function N(e){const s=Array.isArray(e.color)?e.color.map((t,o)=>`<button 
        class="color-btn${o===0?" active":""}" 
        style="background-color:${t};" 
        data-color="${t}" 
        data-img="${e.colorImages?.[t]||e.images?.[0]}"
      ></button>`).join(""):"";return`
      <div class="gallery">${(Array.isArray(e.images)?e.images.slice(0,3):[]).map((t,o)=>o===0?`<img src="${t}" alt="${e.name}" class="main-image gallery-image" />`:`<img src="${t}" alt="${e.name}" class="thumb-image gallery-image" />`).join("")}</div>
              <div class="name-details">
              <h2 class="name">${e.name}</h2>
              <p class="type">${e.type}</p>
              </div>
              <div class="details">
              <p class="price">${e.price} грн</p>
              <div class="raty" data-score="${e.rate||0}"></div>
              <div class="colors">
                <span>Колір</span>
                <div class="color-list">${s}</div>
              </div>
              <p class="description">${e.description}</p>
              <p class="sizes">Розміри: ${e.sizes}</p>
              <button class="btn-order" type="submit">Перейти до замовлення</button>
              </div>
  `}const L="https://furniture-store.b.goit.study/api",b=document.querySelectorAll(".category-card"),w=document.querySelector(".furniture-list"),E=document.querySelector(".load-more-button"),P=document.querySelector(".loader");let k="",g=1,p=[];function Q(){P.classList.remove("hidden")}function V(){P.classList.add("hidden")}async function q(e="",s=1,n=8){Q();try{const r=e?`${L}/furnitures?category=${e}&limit=${n}&page=${s}`:`${L}/furnitures?limit=${n}&page=${s}`,o=(await M.get(r)).data;if(s===1?p=[...o.furnitures]:p=[...p,...o.furnitures],!o.furnitures||o.furnitures.length===0){d.info({title:"Увага",message:"Більше товарів цієї категорії немає в наявності",position:"topRight"}),E.disabled=!0;return}_(o.furnitures,s===1),E.disabled=o.furnitures.length<n}catch(r){console.error("Помилка при отриманні меблів:",r),d.error({title:"Помилка",message:"Не вдалося завантажити меблі. Спробуйте ще раз.",position:"topRight"})}finally{V()}}function _(e,s=!0){const n=e.map(r=>{const t=r.color.map(o=>`<span class="furniture-color-circle" style="background-color: ${o};"></span>`).join("");return`
        <li class="furniture-card" data-id="${r._id}">
          <img src="${r.images[0]}" alt="${r.name}" class="furniture-image" />
          <h3 class="furniture-name">${r.name}</h3>
          <div class="furniture-colors">${t}</div>
          <p class="furniture-price">${r.price} грн.</p>
          <button type="button" class="details-btn">Детальніше</button>
        </li>
      `}).join("");s?w.innerHTML=n:w.insertAdjacentHTML("beforeend",n)}async function K(){try{const s=await(await fetch(`${L}/categories`)).json();b.forEach(n=>{const r=n.dataset.name,t=s.find(o=>o.name===r);t&&(n.dataset.id=t._id)})}catch(e){console.error("Помилка при підставці ID категорії:",e),d.error({title:"Помилка",message:"Не вдалося завантажити категорії. Спробуйте ще раз.",position:"topRight"})}}function U(){b.forEach(e=>{e.addEventListener("click",()=>{b.forEach(s=>s.classList.remove("active")),e.classList.add("active"),k=e.dataset.id||"",g=1,q(k,g)})})}E.addEventListener("click",()=>{g+=1,q(k,g)});w.addEventListener("click",e=>{const s=e.target.closest(".details-btn");if(s){const r=s.closest(".furniture-card")?.dataset.id;r&&H(r)}});function W(){return p}async function G(){await K(),U(),q()}G();async function J(e,s,n){const r="https://furniture-store.b.goit.study/api/",t=new URLSearchParams({page:s,limit:n}),o=`${r}${e}?${t.toString()}`;return(await M(o)).data}function X(e){return e>=3.3&&e<=3.7?3.5:e>=3.8&&e<=4.2?4:Math.round(e*2)/2}function Y(e){return e.map(({descr:s,name:n,rate:r})=>`
      <div class="swiper-slide">
        <div class="feedback-card">
          <div class="raty" data-score="${X(r)}"></div>
          <p class="feedback-text">"${s}"</p>
          <p class="feedback-name">${n}</p>
        </div>
      </div>
    `).join("")}J("feedbacks",1,10).then(e=>{if(!e.feedbacks?.length)return;const s=document.querySelector(".feedback-from-API");s.innerHTML=Y(e.feedbacks),$(".raty").raty({readOnly:!0,half:!0,starType:"i",score(){return $(this).attr("data-score")}});const n=document.querySelector("#prev-btn"),r=document.querySelector("#next-btn");new F(".feedback-swiper",{modules:[R,O],slidesPerView:1,spaceBetween:24,slidesPerGroup:1,watchOverflow:!0,breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:24}},navigation:{nextEl:r,prevEl:n},pagination:{el:"#feedback-dots",clickable:!0,bulletClass:"dot",bulletActiveClass:"active",renderBullet:(o,a)=>`<div class="${a}"></div>`},on:{init(){t(this)},slideChange(){t(this)},resize(){t(this)}}});function t(o){n.classList.toggle("arrow-disabled",o.isBeginning),r.classList.toggle("arrow-disabled",o.isEnd)}}).catch(e=>{console.error("Помилка при отриманні відгуків:",e),d.show({title:"Помилка",message:e.message||"Не вдалося завантажити відгуки.",position:"topCenter",color:"#ef4040",messageColor:"#fff",titleColor:"#fff"});const s=document.querySelector(".feedback-from-API");s&&(s.innerHTML='<div class="error-text"><p>Не вдалося показати відгуки.</p></div>');const n=document.querySelector("#prev-btn"),r=document.querySelector("#next-btn");n&&(n.disabled=!0,n.classList.add("arrow-disabled")),r&&(r.disabled=!0,r.classList.add("arrow-disabled"))});const Z=document.querySelector(".modal-close-btn"),S=document.querySelector(".modal-overlay"),u=document.querySelector(".modal-form");Z.addEventListener("click",y);S.addEventListener("click",e=>{e.target===S&&y()});document.addEventListener("keydown",C);function y(){S.classList.toggle("is-open"),document.removeEventListener("keydown",C)}function C(e){e.key==="Escape"&&y()}u.addEventListener("submit",async e=>{e.preventDefault();const s={email:u.elements["user-email"].value,phone:u.elements.phone.value,modelId:"682f9bbf8acbdf505592ac36",color:"#1212ca",comment:u.elements["user-comment"].value};try{const n=await M.post("https://furniture-store.b.goit.study/api/orders",s,{headers:{"Content-Type":"application/json"}});d.success({title:"OK",message:"Замовлення успішно відправлено!",position:"topRight"}),y(),u.reset()}catch(n){console.error("Помилка відправки:",n),d.error({title:"Error",message:n.response.data.message,position:"topRight"})}});
//# sourceMappingURL=index.js.map
