import{A as I,a as M,i as d,S as F,N as O,P as R}from"./assets/vendor-WM8bFQgC.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function s(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(t){if(t.ep)return;t.ep=!0;const r=s(t);fetch(t.href,r)}})();const T=document.querySelector(".hero-btn"),j=document.getElementById("feedback");T.addEventListener("click",()=>{j.scrollIntoView({behavior:"smooth"}),(void 0).blur()});new I(".accordion-container-FAQ",{duration:900,showMultiple:!1});document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll(".FAQ-item");document.querySelectorAll(".FAQ-item").forEach(s=>s.addEventListener("click",()=>{s.classList.toggle("active")})),e.forEach(s=>{const o=s.querySelector(".FAQ-btn"),t=s.querySelector(".ac-panel");o.addEventListener("click",function(){t.style.display==="flex"?t.style.overflow="hidden":t.style.display="flex"})})});function z(){const e=document.querySelector("[data-menu]"),n=document.querySelector("[data-menu-landscape]"),s=document.querySelector(".header"),o=document.body;if(!e||!n||!s)return;const t=(a,i)=>{a&&(a.classList.toggle("is-open",i),o.classList.toggle("no-scroll",i),s.classList.toggle("no-border-bottom",i),s.classList.toggle("is-menu-open",i))},r=()=>{const a=window.matchMedia("(min-width: 768px) and (max-width: 1439px) and (orientation: portrait)").matches,i=window.matchMedia("(min-width: 768px) and (max-width: 1439px) and (orientation: landscape)").matches;return window.innerWidth<=767||a?e:i?n:null};o.addEventListener("click",a=>{const i=a.target.closest("[data-menu-open]"),v=a.target.closest("[data-menu-close]"),L=a.target.closest("a");if(i){const c=r();c&&t(c,!0)}else if(v||L){const c=r();c&&c.classList.contains("is-open")&&t(c,!1)}}),window.addEventListener("keydown",a=>{const i=r();a.key==="Escape"&&i&&i.classList.contains("is-open")&&t(i,!1)}),window.addEventListener("resize",()=>{const a=window.matchMedia("(min-width: 768px) and (max-width: 1439px) and (orientation: portrait)").matches,i=window.matchMedia("(min-width: 768px) and (max-width: 1439px) and (orientation: landscape)").matches,v=e.classList.contains("is-open"),L=n.classList.contains("is-open");v&&(!a||window.innerWidth>1439)&&t(e,!1),L&&(!i||window.innerWidth>1439)&&t(n,!1)})}document.addEventListener("DOMContentLoaded",()=>{z()});const p=document.querySelector(".modal-overlay"),H=document.querySelector(".modal-close-btn"),u=document.querySelector(".modal-form");H.addEventListener("click",g);p.addEventListener("click",e=>{e.target===p&&g()});function D(){p.classList.add("is-open"),document.body.style.overflow="hidden",document.addEventListener("keydown",A)}function g(){p.classList.remove("is-open"),document.querySelector(".modal-furniture.is-hidden")&&(document.body.style.overflow=""),document.removeEventListener("keydown",A)}function A(e){e.key==="Escape"&&g()}u.addEventListener("submit",async e=>{e.preventDefault();const n={email:u.elements["user-email"].value,phone:u.elements.phone.value,modelId:"682f9bbf8acbdf505592ac36",color:"#1212ca",comment:u.elements["user-comment"].value};try{await M.post("https://furniture-store.b.goit.study/api/orders",n,{headers:{"Content-Type":"application/json"}}),d.success({title:"OK",message:"Замовлення успішно відправлено!",position:"topRight"}),g(),u.reset()}catch(s){d.error({title:"Error",message:s.response?.data?.message||"Помилка відправки замовлення",position:"topRight"})}});const l=document.querySelector(".modal-furniture"),x=document.querySelector(".btn-close-modal"),f=document.querySelector(".content-modal-form");function N(e){const n=J().find(s=>s._id===e);n&&Q(n)}function Q(e){f.innerHTML=V(e),l.classList.remove("is-hidden"),document.body.style.overflow="hidden",$(f).find(".raty").raty({readOnly:!0,half:!0,starType:"i",score:function(){return $(this).attr("data-score")}});const n=f.querySelectorAll(".color-btn"),s=f.querySelector(".main-image");n.forEach(o=>{o.addEventListener("click",()=>{n.forEach(r=>r.classList.remove("active")),o.classList.add("active");const t=o.dataset.img;t&&s&&(s.src=t)})}),x.addEventListener("click",h),l.addEventListener("click",B),document.addEventListener("keydown",P)}function h(){l.classList.add("is-hidden"),document.querySelector(".modal-overlay.is-open")||(document.body.style.overflow=""),x.removeEventListener("click",h),l.removeEventListener("click",B),document.removeEventListener("keydown",P)}function B(e){e.target===l&&h()}function P(e){e.key==="Escape"&&!l.classList.contains("is-hidden")&&h()}document.addEventListener("click",e=>{e.target.closest(".btn-order")&&D()});function V(e){const n=Array.isArray(e.color)?e.color.map((t,r)=>`<button 
              class="color-btn${r===0?" active":""}" 
              style="background-color:${t};" 
              data-color="${t}" 
              data-img="${e.colorImages?.[t]||e.images?.[0]}"
            ></button>`).join(""):"";return`
    <div class="gallery">${(Array.isArray(e.images)?e.images.slice(0,3):[]).map((t,r)=>r===0?`<img src="${t}" alt="${e.name}" class="main-image gallery-image" />`:`<img src="${t}" alt="${e.name}" class="thumb-image gallery-image" />`).join("")}</div>
    <div class="name-details">
      <h2 class="name">${e.name}</h2>
      <p class="type">${e.type}</p>
      <div class="details">
        <p class="price">${e.price} грн</p>
        <div class="raty" data-score="${e.rate||0}"></div>
        <div class="colors">
          <span>Колір</span>
          <div class="color-list">${n}</div>
        </div>
        <p class="description">${e.description}</p>
        <p class="sizes">Розміри: ${e.sizes}</p>
        <button class="btn-order" type="button">Перейти до замовлення</button>
      </div>
    </div>
  `}const b="https://furniture-store.b.goit.study/api",w=document.querySelectorAll(".category-card"),E=document.querySelector(".furniture-list"),k=document.querySelector(".load-more-button"),C=document.querySelector(".loader");let S="",y=1,m=[];function _(){C.classList.remove("hidden")}function K(){C.classList.add("hidden")}async function q(e="",n=1,s=8){_();try{const o=e?`${b}/furnitures?category=${e}&limit=${s}&page=${n}`:`${b}/furnitures?limit=${s}&page=${n}`,r=(await M.get(o)).data;if(n===1?m=[...r.furnitures]:m=[...m,...r.furnitures],!r.furnitures||r.furnitures.length===0){d.info({title:"Увага",message:"Більше товарів цієї категорії немає в наявності",position:"topRight"}),k.disabled=!0;return}U(r.furnitures,n===1),k.disabled=r.furnitures.length<s}catch(o){console.error("Помилка при отриманні меблів:",o),d.error({title:"Помилка",message:"Не вдалося завантажити меблі. Спробуйте ще раз.",position:"topRight"})}finally{K()}}function U(e,n=!0){const s=e.map(o=>{const t=o.color.map(r=>`<span class="furniture-color-circle" style="background-color: ${r};"></span>`).join("");return`
        <li class="furniture-card" data-id="${o._id}">
          <img src="${o.images[0]}" alt="${o.name}" class="furniture-image" />
          <h3 class="furniture-name">${o.name}</h3>
          <div class="furniture-colors">${t}</div>
          <p class="furniture-price">${o.price} грн.</p>
          <button type="button" class="details-btn">Детальніше</button>
        </li>
      `}).join("");n?E.innerHTML=s:E.insertAdjacentHTML("beforeend",s)}async function W(){try{const n=await(await fetch(`${b}/categories`)).json();w.forEach(s=>{const o=s.dataset.name,t=n.find(r=>r.name===o);t&&(s.dataset.id=t._id)})}catch(e){console.error("Помилка при підставці ID категорії:",e),d.error({title:"Помилка",message:"Не вдалося завантажити категорії. Спробуйте ще раз.",position:"topRight"})}}function G(){w.forEach(e=>{e.addEventListener("click",()=>{w.forEach(n=>n.classList.remove("active")),e.classList.add("active"),S=e.dataset.id||"",y=1,q(S,y)})})}k.addEventListener("click",()=>{y+=1,q(S,y)});E.addEventListener("click",e=>{const n=e.target.closest(".details-btn");if(n){const o=n.closest(".furniture-card")?.dataset.id;o&&N(o)}});function J(){return m}async function X(){await W(),G(),q()}X();async function Y(e,n,s){const o="https://furniture-store.b.goit.study/api/",t=new URLSearchParams({page:n,limit:s}),r=`${o}${e}?${t.toString()}`;return(await M(r)).data}function Z(e){return e>=3.3&&e<=3.7?3.5:e>=3.8&&e<=4.2?4:Math.round(e*2)/2}function ee(e){return e.map(({descr:n,name:s,rate:o})=>`
      <div class="swiper-slide">
        <div class="feedback-card">
          <div class="raty" data-score="${Z(o)}"></div>
          <p class="feedback-text">"${n}"</p>
          <p class="feedback-name">${s}</p>
        </div>
      </div>
    `).join("")}Y("feedbacks",1,10).then(e=>{if(!e.feedbacks?.length)return;const n=document.querySelector(".feedback-from-API");n.innerHTML=ee(e.feedbacks),$(".raty").raty({readOnly:!0,half:!0,starType:"i",score(){return $(this).attr("data-score")}});const s=document.querySelector("#prev-btn"),o=document.querySelector("#next-btn");new F(".feedback-swiper",{modules:[O,R],slidesPerView:1,spaceBetween:24,slidesPerGroup:1,watchOverflow:!0,breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:24}},navigation:{nextEl:o,prevEl:s},pagination:{el:"#feedback-dots",clickable:!0,bulletClass:"dot",bulletActiveClass:"active",renderBullet:(r,a)=>`<div class="${a}"></div>`},on:{init(){t(this)},slideChange(){t(this)},resize(){t(this)}}});function t(r){s.classList.toggle("arrow-disabled",r.isBeginning),o.classList.toggle("arrow-disabled",r.isEnd)}}).catch(e=>{console.error("Помилка при отриманні відгуків:",e),d.show({title:"Помилка",message:e.message||"Не вдалося завантажити відгуки.",position:"topCenter",color:"#ef4040",messageColor:"#fff",titleColor:"#fff"});const n=document.querySelector(".feedback-from-API");n&&(n.innerHTML='<div class="error-text"><p>Не вдалося показати відгуки.</p></div>');const s=document.querySelector("#prev-btn"),o=document.querySelector("#next-btn");s&&(s.disabled=!0,s.classList.add("arrow-disabled")),o&&(o.disabled=!0,o.classList.add("arrow-disabled"))});
//# sourceMappingURL=index.js.map
