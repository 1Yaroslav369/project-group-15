import{a as b,i as m,S,N as k,P as E}from"./assets/vendor-C_U3Uxdf.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function i(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(t){if(t.ep)return;t.ep=!0;const n=i(t);fetch(t.href,n)}})();function M(){const e=document.querySelector("[data-menu]"),s=document.querySelector("[data-menu-landscape]"),i=document.querySelector("[data-menu-open]"),r=document.querySelector("[data-menu-close]"),t=document.querySelector(".header"),n=document.body;if(!e||!s||!i||!r||!t)return;const o=()=>{const a=window.matchMedia("(min-width: 768px) and (max-width: 1439px) and (orientation: portrait)").matches,d=window.matchMedia("(min-width: 768px) and (max-width: 1439px) and (orientation: landscape)").matches;let f;if(window.innerWidth<=767||a)f=e;else if(d)f=s;else return;const p=f.classList.toggle("is-open");n.classList.toggle("no-scroll",p),t.classList.toggle("no-border-bottom",p),t.classList.toggle("is-menu-open",p)};i.addEventListener("click",o),r.addEventListener("click",o);const c=a=>{a.target.closest("a")&&o()};e.addEventListener("click",c),s.addEventListener("click",c),window.addEventListener("keydown",a=>{a.key==="Escape"&&(e.classList.contains("is-open")||s.classList.contains("is-open"))&&o()}),window.addEventListener("resize",()=>{if(e.classList.contains("is-open")||s.classList.contains("is-open")){const a=window.matchMedia("(min-width: 768px) and (max-width: 1439px) and (orientation: portrait)").matches,d=window.matchMedia("(min-width: 768px) and (max-width: 1439px) and (orientation: landscape)").matches;e.classList.contains("is-open")&&!a&&(d||window.innerWidth>1439)&&o(),s.classList.contains("is-open")&&!d&&o()}})}document.addEventListener("DOMContentLoaded",()=>{M()});const h="https://furniture-store.b.goit.study/api",w=document.querySelectorAll(".category-card"),L=document.querySelector(".furniture-list"),l=document.querySelector(".load-more-button"),v=document.querySelector(".loader");let g="",u=1;function P(){v.classList.remove("hidden")}function x(){v.classList.add("hidden")}async function y(e="",s=1,i=8){P();try{const r=e?`${h}/furnitures?category=${e}&limit=${i}&page=${s}`:`${h}/furnitures?limit=${i}&page=${s}`,n=(await b.get(r)).data;if(!n.furnitures||n.furnitures.length===0){m.info({title:"Увага",message:"Більше товарів цієїкатегорії немає в наявності",position:"topRight"}),l.disabled=!0;return}q(n.furnitures,s===1),n.furnitures.length<i?l.disabled=!0:l.disabled=!1}catch(r){console.error("Помилка при отриманні меблів:",r),m.error({title:"Помилка",message:"Не вдалося завантажити меблі. Спробуйте ще раз.",position:"topRight"})}finally{x()}}function q(e,s=!0){const i=e.map(r=>{const t=r.color.map(n=>`<span class="furniture-color-circle" style="background-color: ${n};"></span>`).join("");return`
          <li class="furniture-card">
          <img src="${r.images[0]}" alt="${r.name}" class="furniture-image" />
          <h3 class="furniture-name">${r.name}</h3>
          <div class="furniture-colors">${t}</div>
          <p class="furniture-price">${r.price} грн.</p>
          <button type="button">Детальніше</button>
          </li>
          `}).join("");s?L.innerHTML=i:L.insertAdjacentHTML("beforeend",i)}async function B(){try{const i=await(await fetch(`${h}/categories`)).json();document.querySelectorAll(".category-card").forEach(t=>{const n=t.dataset.name,o=i.find(c=>c.name===n);o&&(t.dataset.id=o._id)})}catch(e){console.error("Помилка при підставці ID категорії:",e),m.error({title:"Помилка",message:"Не вдалося завантажити категорії. Спробуйте ще раз.",position:"topRight"})}}function A(){w.forEach(e=>{e.addEventListener("click",()=>{w.forEach(s=>s.classList.remove("active")),e.classList.add("active"),g=e.dataset.id||"",u=1,y(g,u)})})}l.addEventListener("click",()=>{u+=1,y(g,u)});async function O(){await B(),A(),y()}O();async function C(e,s,i){const r="https://furniture-store.b.goit.study/api/",t=new URLSearchParams({page:s,limit:i}),n=`${r}${e}?${t.toString()}`;return(await b(n)).data}function R(e){return e>=3.3&&e<=3.7?3.5:e>=3.8&&e<=4.2?4:Math.round(e*2)/2}function z(e){return e.map(({descr:s,name:i,rate:r})=>`
      <div class="swiper-slide">
        <div class="feedback-card">
          <div class="raty" data-score="${R(r)}"></div>
          <p class="feedback-text">"${s}"</p>
          <p class="feedback-name">${i}</p>
        </div>
      </div>
    `).join("")}C("feedbacks",1,10).then(e=>{var n;if(!((n=e.feedbacks)!=null&&n.length))return;const s=document.querySelector(".feedback-from-API");s.innerHTML=z(e.feedbacks),$(".raty").raty({readOnly:!0,half:!0,starType:"i",score(){return $(this).attr("data-score")}});const i=document.querySelector("#prev-btn"),r=document.querySelector("#next-btn");new S(".feedback-swiper",{modules:[k,E],slidesPerView:1,spaceBetween:20,slidesPerGroup:1,watchOverflow:!0,breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:32}},navigation:{nextEl:r,prevEl:i},pagination:{el:"#feedback-dots",clickable:!0,bulletClass:"dot",bulletActiveClass:"active",renderBullet:(o,c)=>`<div class="${c}"></div>`},on:{init(){t(this)},slideChange(){t(this)},resize(){t(this)}}});function t(o){i.classList.toggle("arrow-disabled",o.isBeginning),r.classList.toggle("arrow-disabled",o.isEnd)}}).catch(e=>console.error("Помилка при отриманні відгуків:",e));
//# sourceMappingURL=index.js.map
