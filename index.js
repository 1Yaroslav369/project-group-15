import{a as E,i as c,A as M,S as C,N as P,P as I}from"./assets/vendor-HAKI6AzT.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(t){if(t.ep)return;t.ep=!0;const o=r(t);fetch(t.href,o)}})();const F=document.querySelector(".hero-btn"),O=document.getElementById("feedback");F.addEventListener("click",()=>{O.scrollIntoView({behavior:"smooth"}),(void 0).blur()});const y="https://furniture-store.b.goit.study/api",g=document.querySelectorAll(".category-card"),v=document.querySelector(".furniture-list"),h=document.querySelector(".load-more-button"),w=document.querySelector(".loader");let b="",m=1,f=[];function x(){w.classList.remove("hidden")}function R(){w.classList.add("hidden")}async function k(e="",s=1,r=8){x();try{const n=e?`${y}/furnitures?category=${e}&limit=${r}&page=${s}`:`${y}/furnitures?limit=${r}&page=${s}`,o=(await E.get(n)).data;if(s===1?f=[...o.furnitures]:f=[...f,...o.furnitures],!o.furnitures||o.furnitures.length===0){c.info({title:"Увага",message:"Більше товарів цієї категорії немає в наявності",position:"topRight"}),h.disabled=!0;return}T(o.furnitures,s===1),h.disabled=o.furnitures.length<r}catch(n){console.error("Помилка при отриманні меблів:",n),c.error({title:"Помилка",message:"Не вдалося завантажити меблі. Спробуйте ще раз.",position:"topRight"})}finally{R()}}function T(e,s=!0){const r=e.map(n=>{const t=n.color.map(o=>`<span class="furniture-color-circle" style="background-color: ${o};"></span>`).join("");return`
        <li class="furniture-card" data-id="${n._id}">
          <img src="${n.images[0]}" alt="${n.name}" class="furniture-image" />
          <h3 class="furniture-name">${n.name}</h3>
          <div class="furniture-colors">${t}</div>
          <p class="furniture-price">${n.price} грн.</p>
          <button type="button" class="details-btn">Детальніше</button>
        </li>
      `}).join("");s?v.innerHTML=r:v.insertAdjacentHTML("beforeend",r)}async function j(){try{const s=await(await fetch(`${y}/categories`)).json();g.forEach(r=>{const n=r.dataset.name,t=s.find(o=>o.name===n);t&&(r.dataset.id=t._id)})}catch(e){console.error("Помилка при підставці ID категорії:",e),c.error({title:"Помилка",message:"Не вдалося завантажити категорії. Спробуйте ще раз.",position:"topRight"})}}function z(){g.forEach(e=>{e.addEventListener("click",()=>{g.forEach(s=>s.classList.remove("active")),e.classList.add("active"),b=e.dataset.id||"",m=1,k(b,m)})})}h.addEventListener("click",()=>{m+=1,k(b,m)});v.addEventListener("click",e=>{const s=e.target.closest(".details-btn");if(s){const n=s.closest(".furniture-card")?.dataset.id;n&&D(n)}});function H(){return f}async function N(){await j(),z(),k()}N();const i=document.querySelector(".modal-furniture");document.querySelector(".modal-form-container");const S=document.querySelector(".btn-close-modal"),d=document.querySelector(".content-modal-form");document.querySelector(".example");function D(e){const s=H().find(r=>r._id===e);s&&Q(s)}function Q(e){console.log("Рейтинг:",e.rating),d.innerHTML=V(e),i.classList.remove("is-hidden"),document.body.style.overflow="hidden",$(d).find(".raty").raty({readOnly:!0,half:!0,starType:"i",score:function(){return $(this).attr("data-score")}});const s=d.querySelectorAll(".color-btn"),r=d.querySelector(".main-image");s.forEach(n=>{n.addEventListener("click",()=>{s.forEach(o=>o.classList.remove("active")),n.classList.add("active");const t=n.dataset.img;t&&r&&(r.src=t)})}),S.addEventListener("click",u),i.addEventListener("click",q),document.addEventListener("keydown",A)}function u(){document.body.style.overflow="",i.classList.add("is-hidden"),S.removeEventListener("click",u),i.removeEventListener("click",q),document.removeEventListener("keydown",A);const e=d.querySelector(".btn-order");e&&e.addEventListener("click",()=>{u(),hideModal()})}function q(e){e.target===i&&u()}function A(e){e.key==="Escape"&&!i.classList.contains("is-hidden")&&u()}function V(e){const s=Array.isArray(e.color)?e.color.map((t,o)=>`<button 
        class="color-btn${o===0?" active":""}" 
        style="background-color:${t};" 
        data-color="${t}" 
        data-img="${e.colorImages?.[t]||e.images?.[0]}"
      ></button>`).join(""):"";return`
      <div class="gallery">${(Array.isArray(e.images)?e.images.slice(0,3):[]).map((t,o)=>o===0?`<img src="${t}" alt="${e.name}" class="main-image gallery-image" />`:`<img src="${t}" alt="${e.name}" class="thumb-image gallery-image" />`).join("")}</div>
              <div class="name-details">
              <h2 class="name">${e.name}</h2>
              <p class="type">${e.type}</p>
              </div>
              <div class="details">
              <p class="price">${e.price} грн</p>
              <div class="raty" data-score="${e.rate||0}"></div>
              <div class="colors">
                <span>Колір</span>
                <div class="color-list">${s}</div>
              </div>
              <p class="description">${e.description}</p>
              <p class="sizes">Розміри: ${e.sizes}</p>
              <button class="btn-order" type="submit">Перейти до замовлення</button>
              </div>
  `}new M(".accordion-container-FAQ",{duration:900,showMultiple:!1});document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll(".FAQ-item");document.querySelectorAll(".FAQ-item").forEach(r=>r.addEventListener("click",()=>{r.classList.toggle("active")})),e.forEach(r=>{const n=r.querySelector(".FAQ-btn"),t=r.querySelector(".ac-panel");n.addEventListener("click",function(){t.style.display==="flex"?t.style.overflow="hidden":t.style.display="flex"})})});async function _(e,s,r){const n="https://furniture-store.b.goit.study/api/",t=new URLSearchParams({page:s,limit:r}),o=`${n}${e}?${t.toString()}`;return(await E(o)).data}function K(e){return e>=3.3&&e<=3.7?3.5:e>=3.8&&e<=4.2?4:Math.round(e*2)/2}function U(e){return e.map(({descr:s,name:r,rate:n})=>`
      <div class="swiper-slide">
        <div class="feedback-card">
          <div class="raty" data-score="${K(n)}"></div>
          <p class="feedback-text">"${s}"</p>
          <p class="feedback-name">${r}</p>
        </div>
      </div>
    `).join("")}_("feedbacks",1,10).then(e=>{if(!e.feedbacks?.length)return;const s=document.querySelector(".feedback-from-API");s.innerHTML=U(e.feedbacks),$(".raty").raty({readOnly:!0,half:!0,starType:"i",score(){return $(this).attr("data-score")}});const r=document.querySelector("#prev-btn"),n=document.querySelector("#next-btn");new C(".feedback-swiper",{modules:[P,I],slidesPerView:1,spaceBetween:24,slidesPerGroup:1,watchOverflow:!0,breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:24}},navigation:{nextEl:n,prevEl:r},pagination:{el:"#feedback-dots",clickable:!0,bulletClass:"dot",bulletActiveClass:"active",renderBullet:(o,a)=>`<div class="${a}"></div>`},on:{init(){t(this)},slideChange(){t(this)},resize(){t(this)}}});function t(o){r.classList.toggle("arrow-disabled",o.isBeginning),n.classList.toggle("arrow-disabled",o.isEnd)}}).catch(e=>{console.error("Помилка при отриманні відгуків:",e),c.show({title:"Помилка",message:e.message||"Не вдалося завантажити відгуки.",position:"topCenter",color:"#ef4040",messageColor:"#fff",titleColor:"#fff"});const s=document.querySelector(".feedback-from-API");s&&(s.innerHTML='<div class="error-text"><p>Не вдалося показати відгуки.</p></div>');const r=document.querySelector("#prev-btn"),n=document.querySelector("#next-btn");r&&(r.disabled=!0,r.classList.add("arrow-disabled")),n&&(n.disabled=!0,n.classList.add("arrow-disabled"))});const G=document.querySelector(".modal-close-btn"),L=document.querySelector(".modal-overlay"),l=document.querySelector(".modal-form");G.addEventListener("click",p);L.addEventListener("click",e=>{e.target===L&&p()});document.addEventListener("keydown",B);function p(){L.classList.toggle("is-open"),document.removeEventListener("keydown",B)}function B(e){e.key==="Escape"&&p()}l.addEventListener("submit",async e=>{e.preventDefault();const s={email:l.elements["user-email"].value,phone:l.elements.phone.value,modelId:"682f9bbf8acbdf505592ac36",color:"#1212ca",comment:l.elements["user-comment"].value};try{const r=await E.post("https://furniture-store.b.goit.study/api/orders",s,{headers:{"Content-Type":"application/json"}});c.success({title:"OK",message:"Замовлення успішно відправлено!",position:"topRight"}),p(),l.reset()}catch(r){console.error("Помилка відправки:",r),c.error({title:"Error",message:r.response.data.message,position:"topRight"})}});
//# sourceMappingURL=index.js.map
