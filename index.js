import{a as y,i as c,S as b,N as v,P as w}from"./assets/vendor-hUVvDy9I.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function r(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(t){if(t.ep)return;t.ep=!0;const o=r(t);fetch(t.href,o)}})();const u="https://furniture-store.b.goit.study/api",g=document.querySelectorAll(".category-card"),f=document.querySelector(".furniture-list"),a=document.querySelector(".load-more-button"),h=document.querySelector(".loader");let p="",d=1;function L(){h.classList.remove("hidden")}function S(){h.classList.add("hidden")}async function m(e="",n=1,r=8){L();try{const s=e?`${u}/furnitures?category=${e}&limit=${r}&page=${n}`:`${u}/furnitures?limit=${r}&page=${n}`,o=(await y.get(s)).data;if(!o.furnitures||o.furnitures.length===0){c.info({title:"Увага",message:"Більше товарів цієїкатегорії немає в наявності",position:"topRight"}),a.disabled=!0;return}P(o.furnitures,n===1),o.furnitures.length<r?a.disabled=!0:a.disabled=!1}catch(s){console.error("Помилка при отриманні меблів:",s),c.error({title:"Помилка",message:"Не вдалося завантажити меблі. Спробуйте ще раз.",position:"topRight"})}finally{S()}}function P(e,n=!0){const r=e.map(s=>{const t=s.color.map(o=>`<span class="furniture-color-circle" style="background-color: ${o};"></span>`).join("");return`
          <li class="furniture-card" data-id="${s._id}">
          <img src="${s.images[0]}" alt="${s.name}" class="furniture-image" />
          <h3 class="furniture-name">${s.name}</h3>
          <div class="furniture-colors">${t}</div>
          <p class="furniture-price">${s.price} грн.</p>
          <button type="button" class="details-btn">Детальніше</button>
          </li>
          `}).join("");n?f.innerHTML=r:f.insertAdjacentHTML("beforeend",r)}async function B(){try{const r=await(await fetch(`${u}/categories`)).json();document.querySelectorAll(".category-card").forEach(t=>{const o=t.dataset.name,i=r.find(l=>l.name===o);i&&(t.dataset.id=i._id)})}catch(e){console.error("Помилка при підставці ID категорії:",e),c.error({title:"Помилка",message:"Не вдалося завантажити категорії. Спробуйте ще раз.",position:"topRight"})}}function k(){g.forEach(e=>{e.addEventListener("click",()=>{g.forEach(n=>n.classList.remove("active")),e.classList.add("active"),p=e.dataset.id||"",d=1,m(p,d)})})}a.addEventListener("click",()=>{d+=1,m(p,d)});f.addEventListener("click",e=>{const n=e.target.closest(".details-btn");if(n){const r=n.closest(".furniture-card");r==null||r.dataset.id}});async function q(){await B(),k(),m()}q();async function A(e,n,r){const s="https://furniture-store.b.goit.study/api/",t=new URLSearchParams({page:n,limit:r}),o=`${s}${e}?${t.toString()}`;return(await y(o)).data}function E(e){return e>=3.3&&e<=3.7?3.5:e>=3.8&&e<=4.2?4:Math.round(e*2)/2}function C(e){return e.map(({descr:n,name:r,rate:s})=>`
      <div class="swiper-slide">
        <div class="feedback-card">
          <div class="raty" data-score="${E(s)}"></div>
          <p class="feedback-text">"${n}"</p>
          <p class="feedback-name">${r}</p>
        </div>
      </div>
    `).join("")}A("feedbacks",1,10).then(e=>{var o;if(!((o=e.feedbacks)!=null&&o.length))return;const n=document.querySelector(".feedback-from-API");n.innerHTML=C(e.feedbacks),$(".raty").raty({readOnly:!0,half:!0,starType:"i",score(){return $(this).attr("data-score")}});const r=document.querySelector("#prev-btn"),s=document.querySelector("#next-btn");new b(".feedback-swiper",{modules:[v,w],slidesPerView:1,spaceBetween:24,slidesPerGroup:1,watchOverflow:!0,breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:24}},navigation:{nextEl:s,prevEl:r},pagination:{el:"#feedback-dots",clickable:!0,bulletClass:"dot",bulletActiveClass:"active",renderBullet:(i,l)=>`<div class="${l}"></div>`},on:{init(){t(this)},slideChange(){t(this)},resize(){t(this)}}});function t(i){r.classList.toggle("arrow-disabled",i.isBeginning),s.classList.toggle("arrow-disabled",i.isEnd)}}).catch(e=>{console.error("Помилка при отриманні відгуків:",e),c.show({title:"Помилка",message:e.message||"Не вдалося завантажити відгуки.",position:"topCenter",color:"#ef4040",messageColor:"#fff",titleColor:"#fff"});const n=document.querySelector(".feedback-from-API");n&&(n.innerHTML='<div class="error-text"><p>Не вдалося показати відгуки.</p></div>');const r=document.querySelector("#prev-btn"),s=document.querySelector("#next-btn");r&&(r.disabled=!0,r.classList.add("arrow-disabled")),s&&(s.disabled=!0,s.classList.add("arrow-disabled"))});
//# sourceMappingURL=index.js.map
