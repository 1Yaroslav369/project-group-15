{"version":3,"file":"index.js","sources":["../src/js/hero.js","../src/js/furniture-list.js","../src/js/dataFetch.js","../src/js/feedback.js","../src/js/order-modal.js"],"sourcesContent":["const heroBtn = document.querySelector(\".hero-btn\");\nconst targetSection = document.getElementById('feedback');\n\n\nheroBtn.addEventListener(\"click\", () => {\n    \ntargetSection.scrollIntoView({\n        behavior: 'smooth'\n});\n    this.blur();\n})\n\n","import axios from \"axios\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nconst BASE_URL = 'https://furniture-store.b.goit.study/api';\nconst categoryButtons = document.querySelectorAll('.category-card');\nconst furnitureList = document.querySelector('.furniture-list');\nconst loadMoreButton = document.querySelector('.load-more-button');\nconst loader = document.querySelector('.loader');\n\nlet currentCategoryId = '';\nlet currentPage = 1;\n\nexport function showLoader() {\n     loader.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n     loader.classList.add('hidden');\n}\n//отримуємо меблі з API\nasync function fetchFurniture(categoryId = '', page = 1, limit = 8) {\n     \n     showLoader();\n     try {\n          const url = categoryId\n          ? `${BASE_URL}/furnitures?category=${categoryId}&limit=${limit}&page=${page}`\n          : `${BASE_URL}/furnitures?limit=${limit}&page=${page}`;\n          \n          const response = await axios.get(url);\n          const data = response.data;\n\n          if (!data.furnitures || data.furnitures.length === 0) {\n               iziToast.info({\n                    title: 'Увага',\n                    message: 'Більше товарів цієїкатегорії немає в наявності',\n                    position: 'topRight'\n               });\n               loadMoreButton.disabled = true; // блокуємо кнопку\n               return;\n          }\n          //відображаємо меблі\n          renderFurniture(data.furnitures, page === 1);\n          \n          //блокуємо кнопку якщо немає більше товарів\n          if (data.furnitures.length < limit) {\n               loadMoreButton.disabled = true;\n          } else {\n               loadMoreButton.disabled = false;\n          }\n\n          } catch (error) {\n          console.error('Помилка при отриманні меблів:', error);\n          iziToast.error({\n               title: 'Помилка',\n               message: 'Не вдалося завантажити меблі. Спробуйте ще раз.',\n               position: 'topRight'\n          });\n     } finally {\n          hideLoader();\n     }\n}\n// Рендеринг списку меблів\nfunction renderFurniture(furnitureArray, replace = true) {\n     const markup = furnitureArray\n     .map(item => {\n          const colorCircles = item.color\n          .map(\n               color => `<span class=\"furniture-color-circle\" style=\"background-color: ${color};\"></span>`\n          )\n          .join('');\n          \n          return `\n          <li class=\"furniture-card\" data-id=\"${item._id}\">\n          <img src=\"${item.images[0]}\" alt=\"${item.name}\" class=\"furniture-image\" />\n          <h3 class=\"furniture-name\">${item.name}</h3>\n          <div class=\"furniture-colors\">${colorCircles}</div>\n          <p class=\"furniture-price\">${item.price} грн.</p>\n          <button type=\"button\" class=\"details-btn\">Детальніше</button>\n          </li>\n          `;\n     })\n     .join('');\n     \n     if (replace) {\n          furnitureList.innerHTML = markup;\n     } else {\n          furnitureList.insertAdjacentHTML('beforeend', markup);\n     }\n     \n}\n//отримання ID категорій у кнопки\nasync function fetchCategoriesIds() {\n     try {\n          const response = await fetch(`${BASE_URL}/categories`);\n          const data = await response.json();\n          const categories = data; \n          const categoryButtons = document.querySelectorAll('.category-card');\n          // додаємо ID до кожної кнопки по її назві\n          categoryButtons.forEach(btn => {\n               const name = btn.dataset.name;\n               const matched = categories.find(cat => cat.name === name);\n               if (matched) {\n                    btn.dataset.id = matched._id;\n               }\n          });\n\n\n     } catch (error) {\n          console.error('Помилка при підставці ID категорії:', error);\n\n          iziToast.error({\n               title: 'Помилка',\n               message: 'Не вдалося завантажити категорії. Спробуйте ще раз.',\n               position: 'topRight'\n          });\n     }\n}\n//Логіка перемикання категорій\nfunction setupCategoryFilter() {\n     categoryButtons.forEach(button => {\n          button.addEventListener('click', () => {\n               categoryButtons.forEach(btn => btn.classList.remove('active'));\n               button.classList.add('active');\n               currentCategoryId = button.dataset.id || '';\n               currentPage = 1;\n               fetchFurniture(currentCategoryId, currentPage);\n          });\n     });\n     \n}\n\n// загрузити ще\n\nloadMoreButton.addEventListener('click', () => {\n     currentPage += 1;\n     fetchFurniture(currentCategoryId, currentPage);\n     \n});\n\n\n// кнопка детальніше\nfurnitureList.addEventListener('click', (event) => {\n     const detailsBtn = event.target.closest('.details-btn');\n     if (detailsBtn) {\n          const card = detailsBtn.closest('.furniture-card');\n          const furnitureId = card?.dataset.id;\n          // console.log(`Кнопка \"Детальніше\" натиснута! ID: ${furnitureId}`);\n          if (furnitureId) {\n               openFurnitureModal(furnitureId);\n          }\n     }\n     \n});\n\nfunction openFurnitureModal(id) {\n}\n\n\nasync function init() {\nawait fetchCategoriesIds();\nsetupCategoryFilter();\nfetchFurniture(); // початкове завантаження всіх меблів\n\n}\n\ninit();","import axios from 'axios';\n\nexport async function getDataFromAPI(endPoint, page, limit) {\n  const baseURL = 'https://furniture-store.b.goit.study/api/';\n  const searchParams = new URLSearchParams({\n    page: page,\n    limit: limit,\n  });\n\n  const url = `${baseURL}${endPoint}?${searchParams.toString()}`;\n  const response = await axios(url);\n  return response.data;\n}\n","import { getDataFromAPI } from './dataFetch.js';\nimport '../css/feadback.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport Swiper from 'swiper';\nimport { Navigation, Pagination } from 'swiper/modules';\nimport 'swiper/css';\nimport 'swiper/css/navigation';\nimport 'swiper/css/pagination';\n\nfunction normalizeRate(rate) {\n  if (rate >= 3.3 && rate <= 3.7) return 3.5;\n  if (rate >= 3.8 && rate <= 4.2) return 4;\n  return Math.round(rate * 2) / 2;\n}\n\nfunction createSlides(feedbacks) {\n  return feedbacks\n    .map(({ descr, name, rate }) => {\n      const normalizedRate = normalizeRate(rate);\n      return `\n      <div class=\"swiper-slide\">\n        <div class=\"feedback-card\">\n          <div class=\"raty\" data-score=\"${normalizedRate}\"></div>\n          <p class=\"feedback-text\">\"${descr}\"</p>\n          <p class=\"feedback-name\">${name}</p>\n        </div>\n      </div>\n    `;\n    })\n    .join('');\n}\n\ngetDataFromAPI('feedbacks', 1, 10)\n  .then(data => {\n    if (!data.feedbacks?.length) return;\n\n    const feedbackFromApi = document.querySelector('.feedback-from-API');\n    feedbackFromApi.innerHTML = createSlides(data.feedbacks);\n\n    $('.raty').raty({\n      readOnly: true,\n      half: true,\n      starType: 'i',\n      score() {\n        return $(this).attr('data-score');\n      },\n    });\n\n    const prevBtn = document.querySelector('#prev-btn');\n    const nextBtn = document.querySelector('#next-btn');\n\n    const swiper = new Swiper('.feedback-swiper', {\n      modules: [Navigation, Pagination],\n      slidesPerView: 1,\n      spaceBetween: 24,\n      slidesPerGroup: 1,\n      watchOverflow: true,\n      breakpoints: {\n        768: {\n          slidesPerView: 2,\n          spaceBetween: 24,\n        },\n        1440: {\n          slidesPerView: 3,\n          spaceBetween: 24,\n        },\n      },\n      navigation: {\n        nextEl: nextBtn,\n        prevEl: prevBtn,\n      },\n      pagination: {\n        el: '#feedback-dots',\n        clickable: true,\n        bulletClass: 'dot',\n        bulletActiveClass: 'active',\n        renderBullet: (i, className) => `<div class=\"${className}\"></div>`,\n      },\n      on: {\n        init() {\n          updateArrows(this);\n        },\n        slideChange() {\n          updateArrows(this);\n        },\n        resize() {\n          updateArrows(this);\n        },\n      },\n    });\n\n    function updateArrows(sw) {\n      prevBtn.classList.toggle('arrow-disabled', sw.isBeginning);\n      nextBtn.classList.toggle('arrow-disabled', sw.isEnd);\n    }\n  })\n  .catch(err => {\n    console.error('Помилка при отриманні відгуків:', err);\n\n    iziToast.show({\n      title: 'Помилка',\n      message: err.message || 'Не вдалося завантажити відгуки.',\n      position: 'topCenter',\n      color: '#ef4040',\n      messageColor: '#fff',\n      titleColor: '#fff',\n    });\n\n    const wrapper = document.querySelector('.feedback-from-API');\n    if (wrapper) {\n      wrapper.innerHTML =\n        '<div class=\"error-text\"><p>Не вдалося показати відгуки.</p></div>';\n    }\n\n    const prevBtn = document.querySelector('#prev-btn');\n    const nextBtn = document.querySelector('#next-btn');\n    if (prevBtn) {\n      prevBtn.disabled = true;\n      prevBtn.classList.add('arrow-disabled');\n    }\n    if (nextBtn) {\n      nextBtn.disabled = true;\n      nextBtn.classList.add('arrow-disabled');\n    }\n  });\n","import axios from 'axios';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst closeModalBtn = document.querySelector('.modal-close-btn');\nconst modal = document.querySelector('.modal-overlay');\nconst form = document.querySelector('.modal-form');\n\ncloseModalBtn.addEventListener('click', hideModal);\nmodal.addEventListener('click', event => {\n  if (event.target === modal) {\n    hideModal();\n  }\n});\ndocument.addEventListener('keydown', handleEscapeKey);\n\nexport function hideModal() {\n  modal.classList.toggle('is-open');\n  document.removeEventListener('keydown', handleEscapeKey);\n}\n\nfunction handleEscapeKey(event) {\n  if (event.key === 'Escape') {\n    hideModal();\n  }\n}\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  const data = {\n    email: form.elements['user-email'].value,\n    phone: form.elements['phone'].value,\n    modelId: '682f9bbf8acbdf505592ac36',\n    color: '#1212ca',\n    comment: form.elements['user-comment'].value,\n  };\n  try {\n    const response = await axios.post(\n      'https://furniture-store.b.goit.study/api/orders',\n      data,\n      {\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      }\n    );\n    iziToast.success({\n      title: 'OK',\n      message: 'Замовлення успішно відправлено!',\n      position: 'topRight',\n    });\n    hideModal();\n    form.reset();\n  } catch (error) {\n    console.error('Помилка відправки:', error);\n    iziToast.error({\n      title: 'Error',\n      message: error.response.data.message,\n      position: 'topRight',\n    });\n  }\n});\n"],"names":["heroBtn","targetSection","this","BASE_URL","categoryButtons","furnitureList","loadMoreButton","loader","currentCategoryId","currentPage","showLoader","hideLoader","fetchFurniture","categoryId","page","limit","url","data","axios","iziToast","renderFurniture","error","furnitureArray","replace","markup","item","colorCircles","color","fetchCategoriesIds","categories","btn","name","matched","cat","setupCategoryFilter","button","event","detailsBtn","init","getDataFromAPI","endPoint","baseURL","searchParams","normalizeRate","rate","createSlides","feedbacks","descr","feedbackFromApi","prevBtn","nextBtn","Swiper","Navigation","Pagination","i","className","updateArrows","sw","err","wrapper","closeModalBtn","modal","form","hideModal","handleEscapeKey","response"],"mappings":"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"}