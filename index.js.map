{"version":3,"file":"index.js","sources":["../src/js/furniture-list.js","../src/js/dataFetch.js","../src/js/feedback.js"],"sourcesContent":["import axios from \"axios\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nconst BASE_URL = 'https://furniture-store.b.goit.study/api';\nconst categoryButtons = document.querySelectorAll('.category-card');\nconst furnitureList = document.querySelector('.furniture-list');\nconst loadMoreButton = document.querySelector('.load-more-button');\nconst loader = document.querySelector('.loader');\n\nlet currentCategoryId = '';\nlet currentPage = 1;\n\nexport function showLoader() {\n     loader.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n     loader.classList.add('hidden');\n}\n//отримуємо меблі з API\nasync function fetchFurniture(categoryId = '', page = 1, limit = 8) {\n     \n     showLoader();\n     try {\n          const url = categoryId\n          ? `${BASE_URL}/furnitures?category=${categoryId}&limit=${limit}&page=${page}`\n          : `${BASE_URL}/furnitures?limit=${limit}&page=${page}`;\n          \n          const response = await axios.get(url);\n          const data = response.data;\n          if (!data.furnitures || data.furnitures.length === 0) {\n               iziToast.info({\n                    title: 'Увага',\n                    message: 'Більше товарів цієїкатегорії немає в наявності',\n                    position: 'topRight'\n               });\n               loadMoreButton.disabled = true; // блокуємо кнопку\n               return;\n          }\n          //відображаємо меблі\n          renderFurniture(data.furnitures, page === 1);\n          \n          //блокуємо кнопку якщо немає більше товарів\n          if (data.furnitures.length < limit) {\n               loadMoreButton.disabled = true;\n          } else {\n               loadMoreButton.disabled = false;\n          }\n\n          } catch (error) {\n          console.error('Помилка при отриманні меблів:', error);\n          iziToast.error({\n               title: 'Помилка',\n               message: 'Не вдалося завантажити меблі. Спробуйте ще раз.',\n               position: 'topRight'\n          });\n     } finally {\n          hideLoader();\n     }\n}\n// Рендеринг списку меблів\nfunction renderFurniture(furnitureArray, replace = true) {\n     const markup = furnitureArray\n     .map(item => {\n          const colorCircles = item.color\n          .map(\n               color => `<span class=\"furniture-color-circle\" style=\"background-color: ${color};\"></span>`\n          )\n          .join('');\n          \n          return `\n          <li class=\"furniture-card\">\n          <img src=\"${item.images[0]}\" alt=\"${item.name}\" class=\"furniture-image\" />\n          <h3 class=\"furniture-name\">${item.name}</h3>\n          <div class=\"furniture-colors\">${colorCircles}</div>\n          <p class=\"furniture-price\">${item.price} грн.</p>\n          <button type=\"button\">Детальніше</button>\n          </li>\n          `;\n     })\n     .join('');\n     \n     if (replace) {\n          furnitureList.innerHTML = markup;\n     } else {\n          furnitureList.insertAdjacentHTML('beforeend', markup);\n     }\n     \n\n}\n//отримання ID категорій у кнопки\nasync function fetchCategoriesIds() {\n     try {\n          const response = await fetch(`${BASE_URL}/categories`);\n          const data = await response.json();\n          const categories = data; \n          \n          const categoryButtons = document.querySelectorAll('.category-card');\n          // додаємо ID до кожної кнопки по її назві\n          categoryButtons.forEach(btn => {\n               const name = btn.dataset.name;\n               const matched = categories.find(cat => cat.name === name);\n               if (matched) {\n                    btn.dataset.id = matched._id;\n               }\n          });\n\n\n     } catch (error) {\n          console.error('Помилка при підставці ID категорії:', error);\n\n          iziToast.error({\n               title: 'Помилка',\n               message: 'Не вдалося завантажити категорії. Спробуйте ще раз.',\n               position: 'topRight'\n          });\n     }\n}\n//Логіка перемикання категорій\nfunction setupCategoryFilter() {\n     categoryButtons.forEach(button => {\n          button.addEventListener('click', () => {\n               categoryButtons.forEach(btn => btn.classList.remove('active'));\n               button.classList.add('active');\n               currentCategoryId = button.dataset.id || '';\n               currentPage = 1;\n               fetchFurniture(currentCategoryId, currentPage);\n          });\n     });\n     \n}\n\n// загрузити ще\n\nloadMoreButton.addEventListener('click', () => {\n     currentPage += 1;\n     fetchFurniture(currentCategoryId, currentPage);\n     \n});\n\n\nasync function init() {\nawait fetchCategoriesIds();\nsetupCategoryFilter();\nfetchFurniture(); // початкове завантаження всіх меблів\n\n}\n\ninit();","import axios from 'axios';\n\nexport async function getDataFromAPI(endPoint, page, limit) {\n  const baseURL = 'https://furniture-store.b.goit.study/api/';\n  const searchParams = new URLSearchParams({\n    page: page,\n    limit: limit,\n  });\n\n  const url = `${baseURL}${endPoint}?${searchParams.toString()}`;\n  const response = await axios(url);\n  return response.data;\n}\n","import { getDataFromAPI } from './dataFetch.js';\nimport '../css/feadback.css';\n\nimport Swiper from 'swiper';\nimport { Navigation, Pagination } from 'swiper/modules';\nimport 'swiper/css';\nimport 'swiper/css/navigation';\nimport 'swiper/css/pagination';\n\nfunction normalizeRate(rate) {\n  if (rate >= 3.3 && rate <= 3.7) return 3.5;\n  if (rate >= 3.8 && rate <= 4.2) return 4;\n  return Math.round(rate * 2) / 2;\n}\n\nfunction createSlides(feedbacks) {\n  return feedbacks\n    .map(({ descr, name, rate }) => {\n      const normalizedRate = normalizeRate(rate);\n      return `\n      <div class=\"swiper-slide\">\n        <div class=\"feedback-card\">\n          <div class=\"raty\" data-score=\"${normalizedRate}\"></div>\n          <p class=\"feedback-text\">\"${descr}\"</p>\n          <p class=\"feedback-name\">${name}</p>\n        </div>\n      </div>\n    `;\n    })\n    .join('');\n}\n\ngetDataFromAPI('feedbacks', 1, 10)\n  .then(data => {\n    if (!data.feedbacks?.length) return;\n\n    const feedbackFromApi = document.querySelector('.feedback-from-API');\n    feedbackFromApi.innerHTML = createSlides(data.feedbacks);\n\n    // зірочки\n    $('.raty').raty({\n      readOnly: true,\n      half: true,\n      starType: 'i',\n      score() {\n        return $(this).attr('data-score');\n      },\n    });\n\n    const prevBtn = document.querySelector('#prev-btn');\n    const nextBtn = document.querySelector('#next-btn');\n\n    const swiper = new Swiper('.feedback-swiper', {\n      modules: [Navigation, Pagination],\n      slidesPerView: 1,\n      spaceBetween: 20,\n      slidesPerGroup: 1,\n      watchOverflow: true,\n      breakpoints: {\n        768: {\n          slidesPerView: 2,\n          spaceBetween: 24,\n        },\n        1440: {\n          slidesPerView: 3,\n          spaceBetween: 32,\n        },\n      },\n      navigation: {\n        nextEl: nextBtn,\n        prevEl: prevBtn,\n      },\n      pagination: {\n        el: '#feedback-dots',\n        clickable: true,\n        bulletClass: 'dot',\n        bulletActiveClass: 'active',\n        renderBullet: (i, className) => `<div class=\"${className}\"></div>`,\n      },\n      on: {\n        init() {\n          updateArrows(this);\n        },\n        slideChange() {\n          updateArrows(this);\n        },\n        resize() {\n          updateArrows(this);\n        },\n      },\n    });\n\n    function updateArrows(sw) {\n      prevBtn.classList.toggle('arrow-disabled', sw.isBeginning);\n      nextBtn.classList.toggle('arrow-disabled', sw.isEnd);\n    }\n  })\n  .catch(err => console.error('Помилка при отриманні відгуків:', err));\n"],"names":["BASE_URL","categoryButtons","furnitureList","loadMoreButton","loader","currentCategoryId","currentPage","showLoader","hideLoader","fetchFurniture","categoryId","page","limit","url","data","axios","iziToast","renderFurniture","error","furnitureArray","replace","markup","item","colorCircles","color","fetchCategoriesIds","categories","btn","name","matched","cat","setupCategoryFilter","button","init","getDataFromAPI","endPoint","baseURL","searchParams","normalizeRate","rate","createSlides","feedbacks","descr","_a","feedbackFromApi","prevBtn","nextBtn","Swiper","Navigation","Pagination","className","updateArrows","sw","err"],"mappings":"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"}